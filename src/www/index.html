<!DOCTYPE html>
<html>

<head>
    <title>Kotel</title>
    <link rel="stylesheet" href="style.css">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>

<body onload="main()">
    <script src="code.js" type="text/javascript"></script>
    <span id="stringtable" data-cur_mode0="Neznámý stav" data-cur_mode1="Ručně" data-cur_mode2="Automaticky"
        data-cur_mode3="STOP" data-cur_mode4="Ostatní" data-auto_mode0="Topení" data-auto_mode1="Útlum"
        data-auto_mode2="Obnova plamene"></span>
    <div class="header" id="netstatus">Kotel</div>
    <div id="stav" class="header_stav">
        <div class="button" id="prepnout_rezim"></div>
    </div>
    <div class="varovani" id="simul_temp" hidden="hidden">POZOR: Simulovaná teplota, pouze test!!!</div>
    <div class="dashboard">
        <div class="prvekspopisem">
            <span>Výstupní teplota</span>
            <div class="teplomer" id="vystupni_teplota">
                <div class="label t20">20</div>
                <div class="label t40">40</div>
                <div class="label t60">60</div>
                <div class="label t80">80</div>
                <div class="label t100">100</div>
                <div class="max ref needle"></div>
                <div class="cur needle"></div>
                <div class="label cur_temp">--.-</div>
                <div class="label amp_temp">--.-</div>
            </div>
        </div>
        <div class="prvekspopisem">
            <span>Vstupní teplota</span>
            <div class="teplomer" id="vstupni_teplota">
                <div class="label t20">20</div>
                <div class="label t40">40</div>
                <div class="label t60">60</div>
                <div class="label t80">80</div>
                <div class="label t100">100</div>
                <div class="min ref needle"></div>
                <div class="cur needle"></div>
                <div class="label cur_temp">--.-</div>
                <div class="label amp_temp">--.-</div>
            </div>
        </div>
        <div class="prvekspopisem">
            <span>Zásobník</span>
            <div class="zasobnik" id="zasobnik">
                <div class="fill" style="height: 0"></div>
                <div class="bok1 a"></div>
                <div class="bok1 b"></div>
                <div class="bok2 a"></div>
                <div class="bok2 b"></div>
                <div class="label">--</div>
            </div>
        </div>
        <div class="ovladace prvekspopisem" id="horeni">
            <span>Ovládání hoření</span>
            <div id="ovladac_feeder">Podavač<div class="icon">
                    <div class="iconfeeder"></div>
                </div>
                <div id="mototempmax" hidden="hidden"></div>
            </div>
            <div id="ovladac_fan">Ventilátor<div class="icon">
                    <div class="iconfan"></div>
                </div>
            </div>
            <div id="ovladac_pump">Čerpadlo<div class="icon">
                    <div class="iconpump"></div>
                </div>
            </div>
        </div>
        <div class="wifiinfo prvekspopisem" id="wifi">
            <span>Připojení </span>
            <div class="wifi"></div>
            <div class="label">
                <div id="ssid">---</div>
                <div id="rssi">---</div>
            </div>
        </div>
    <div class="prvekspopisem" id="stats_win">
        <span>Přehledy</span>
        <div class="wifi"></div>
        <div class="label">
            <div id="ssid">---</div>
            <div id="rssi">---</div>
        </div>
    </div>
    </div>
    <div id="manualcontrolpanel" hidden="hidden">
        <p>Panel ručního ovládání</p>
        <div class="buttons">
            <div class="button" id="man_feeder">Podavač<div class="iconfeeder"></div>
            </div>
            <div class="button" id="man_fan">Ventilátor<div class="iconfan"></div>
            </div>
        </div>
        <div class="slider">
            <input type="range" min="1" max="100" step="1" id="man_fan_speed">
        </div>
    </div>


    <div class="okno section" id="nastav_zasobnik" hidden="hidden">
        <div class="sectionname black">Přidat palivo</div>
        <div class="chyba spojeni">Chyba připojení!</div>
        <div class="sub_section unhide">
            <div class="sectionname" onclick="unhide_section.call(this);">Pokročilé volby</div>
            <label><span>Aktuální stav (ignoruj čas naplnění)</span><input type="checkbox" name="absnow"></label>
            <label><span>Kalibrovat (zásobník je prázdný)</span><input type="checkbox" name="kalib"></label>
            <div class="chyba kalibselhal">Kalibrace selhala, zásobník byl na začátku prázdný</div>
        </div>
        <label><span>Přidaný počet pytlů</span><input type="number" value="0" step="1" min="-15" max="15" size="3" name="pytle"></label>
        <div class="chyba male">Nesmí být záporné číslo</div>
        <div class="chyba velke">Moc velká hodnota</div>
        <div class="chyba prazdne">Musíš něco napsat</div>
        <div class="buttonpanel">
                <button>Plně naloženo</button>
                <button>OK</button> 
                <button onclick="close_window.call(this)">Storno</button></div>
    </div>

    <div class="okno section" id="nastav_teplotu" hidden="hidden">
        <div class="vstupni sectionname black">Minimální vstupní teplota</div>
        <div class="vystupni sectionname black">Maximální výstupní teplota</div>
        <div class="sub_section unhide">
            <div class="sectionname" onclick="unhide_section.call(this);">Pokročilé volby</div>
            <label><span>Síla trendu</span><input type="number" step="0.1" min="0" max="25"></label>
            <div class="chyba trnd_male">Moc malá hodnota</div>
            <div class="chyba trnd_velke">Moc velká hodnota</div>
            <div class="chyba trnd_prazdne">Musíš něco napsat</div>
            <label><span>HW adresa teploměru</span><button>Změnit</button></label>
        </div>
        <label><span>Teplota</span><input type="number" value="60" step="1" min="40" max="90" size="3"></label>
        <div class="chyba male">Moc malá teplota</div>
        <div class="chyba velke">Moc velká teplota</div>
        <div class="chyba prazdne">Musíš něco napsat</div>
        <div class="buttonpanel"><button onclick="nastav_teplotu_ok.call(this)">OK</button> <button
                onclick="close_window.call(this)">Storno</button></div>
    </div>

    <div class="okno section" id="nastav_hw_teplomer" hidden="hidden">
        <div class="sectionname black">Vyber teploměr</div>
        <div class="list">

        </div>
        <div class="buttonpanel"><button>OK</button> <button onclick="close_window.call(this)">Storno</button></div>

    </div>
    <div class="okno section" id="nastav_wifi" hidden="hidden">
        <div class="sectionname black">Nastavení připojení</div>
        <div class="sub_section unhide">
            <div class="sectionname" onclick="unhide_section.call(this);">Pokročilé volby</div>
            <label><span>Použít DHCP</span><input type="checkbox" name="dhcp"></label>
            <label><span>Adresa</span><input type="text" name="net.ip" maxlength="15" size="15"></label>
            <label><span>Maska adresy</span><input type="text" name="net.netmask" maxlength="15" size="15"></label>
            <label><span>Výchozí brána</span><input type="text" name="net.gateway" maxlength="15" size="15"></label>
            <label><span>DNS adresa</span><input type="text" name="net.dns" maxlength="15" size="15"></label>
            <div class="chyba addrerror">Některá z adres není v pořádku</div>
        </div>
        <label><span>Wifi SSID</span><input type="text" maxlength="20" size="17" name="wifi.ssid"></label>
        <label><span>Wifi heslo</span><input type="text" maxlength="20" size="17" name="wifi.password"></label>
        <p>Změny nastavení připojení se projeví po restartu zařízení</p>
        <div class="buttonpanel"><button>OK</button> <button onclick="close_window.call(this)">Storno</button></div>
    </div>
    <div class="okno section" id="nastav_topeni" hidden="hidden">
        <div class="sectionname black">Ovládání hoření</div>
        <label><span>Výhřevnost MJ/kg</span><input type="number" min="5" max="25.5" step="0.1"
                name="hval""></label>

        <div class="subsection">
            <div class="sectionname">Plný výkon</div>
            <label><span>Výkon kW</span><input type="number" min="1" max="25" step="0.5"
                    name="full.power_value" data-local="1"></label>
            <label><span>Ventilátor [%]</span><input type="number" min="1" max="100" step="1"
                    name="full.fanpw"></label>
        </div>
        <div class="subsection">
            <div class="sectionname">Snížený výkon</div>
            <label><span>Výkon kW</span><input type="number" min="0.5" max="25" step="0.5" 
                name="low.power_value" data-local="1"></label>
            <label><span>Výkon ventilátoru [%]</span><input type="number" min="1" max="100" step="1"
                    name="low.fanpw"></label>
        </div>
        <div class="subsection">
            <div class="sectionname">Čerpadlo</div>
            <label><span>Spínací výstupní teplota</span><input type="number" min="30" max="90" step="1"
                    name="tpump"></label>
            <div class="sub_section unhide">
                <div class="sectionname" onclick="unhide_section.call(this);">Pokročilé volby</div>
                <label><span>V ručním ovládání čerpadlo trvale zapnuté</span><input type="checkbox"
                        id="pump_active_forever"></label>
                        <label><span>Ventilátor freq.dělič</span><input type="number" min="1" max="255" step="1"
                                name="fanpc"></label>
                    <label><span>Plný výkon - přikládání [s]</span><input type="number" min="1" max="255" step="1"
                            name="full.fueling"></label>
                    <label><span>Plný výkon - prohořívání [s]</span><input type="number" min="1" max="255" step="1"
                            name="full.burnout"></label>
                    <label><span>Snížený výkon - přikládání [s]</span><input type="number" min="1" max="255" step="1"
                            name="low.fueling"></label>
                    <label><span>Snížený výkon - prohořívání [s]</span><input type="number" min="1" max="255" step="1"
                            name="low.burnout"></label>
            </div>
        </div>
        <div class="chyba fail">Některé hodnoty jsou chybně zadané nebo jsou mimo rozsah</div>
        <div class="buttonpanel"><button>OK</button> <button onclick="close_window.call(this)">Storno</button></div>
    </div>
</body>

</html>